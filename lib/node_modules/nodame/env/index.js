module.exports = (function () {
    var environment = 'development';
    var productions = ['productions', 'staging'];

    var set     = function (settings) {
        if (settings.argv.staging || settings.argv.production) {
            // Set priority in case all were called.
            // Staging > Production
            if (settings.argv.production) {
                environment = 'production';
            }

            if (settings.argv.staging) {
                environment = 'staging';
            }
        } else {
            // Set priority in case both exist
            // settings.argv.env > process.env.NODE_ENV
            if (process.env.NODE_ENV !== undefined) {
                environment = process.env.NODE_ENV;
            }

            if (settings.argv.env !== undefined) {
                environment = settings.argv.env;
            }
        }
    };

    var env     = function () {
        return environment;
    }

    var isDev   = function () {
        return productions.indexOf(environment) < 0;
    }

    return {
        set     :  set,
        env     :  env,
        isDev   : isDev
    };
})();
