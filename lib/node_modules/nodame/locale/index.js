var i18n = require('nodame/i18n');

function locale(app) {
    i18n.expressBind(app, {
        locales: ['id', 'en'],
        defaultLocale: 'id',
        cookieName: 'lang',
        directory: nodame.appPath() + '/locales/'
    });
    app.use(function (req, res, next) {
        req.i18n.setLocaleFromQuery();
        req.i18n.setLocaleFromCookie();
        next();
    });
}

module.exports = locale;
